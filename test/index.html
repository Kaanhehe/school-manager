<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smooth Navbar Transition</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
  }

  .navbar {
    background-color: #333;
    overflow: hidden;
    position: relative; /* Add position relative to make absolute positioning work */
  }

  .navbar a {
    float: left;
    display: block;
    color: #f2f2f2;
    text-align: center;
    padding: 14px 20px;
    text-decoration: none;
  }

  .navbar a:hover {
    background-color: #ddd;
    color: #333;
  }

  .navbar .active {
    background-color: #ddd;
    color: #333;
  }

  .background {
    position: absolute;
    background-color: #ddd;
    transition: left 0.3s ease;
  }
</style>
</head>
<body>

<div class="navbar">
  <a href="#" class="nav-item active" onclick="moveBackground(this)">Home</a>
  <a href="#" class="nav-item" onclick="moveBackground(this)">About</a>
  <a href="#" class="nav-item" onclick="moveBackground(this)">Services</a>
  <a href="#" class="nav-item" onclick="moveBackground(this)">Contact</a>
  <div class="background"></div>
</div>

<script>
  const background = document.querySelector('.background');
  const navItems = document.querySelectorAll('.nav-item');

  function moveBackground(element) {
    const index = Array.from(navItems).indexOf(element);
    const newPosition = index * element.offsetWidth;

    // Remove 'active' class from all nav items
    navItems.forEach(item => {
      item.classList.remove('active');
    });

    // Add 'active' class to the clicked nav item
    element.classList.add('active');

    // Calculate transition increment
    const increment = (newPosition - background.offsetLeft) / 10;
    let currentPosition = background.offsetLeft;

    // Perform manual transition
    const transitionInterval = setInterval(() => {
      if ((increment > 0 && currentPosition >= newPosition) || (increment < 0 && currentPosition <= newPosition)) {
        clearInterval(transitionInterval);
        background.style.left = newPosition + 'px';
      } else {
        currentPosition += increment;
        background.style.left = currentPosition + 'px';
      }
    }, 30); // Adjust transition speed by changing the interval
  }

  // Initially set the background position to the active item
  const activeNavItem = document.querySelector('.nav-item.active');
  moveBackground(activeNavItem);
</script>

</body>
</html>
